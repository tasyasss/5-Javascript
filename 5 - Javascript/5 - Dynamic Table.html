<!DOCTYPE html>
<html>

<head>
	<title>Dynamic Table</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="assets/css/bootstrap.min.css">

	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/popper.min.js"></script>
	<script src="assets/js/bootstrap.js"></script>

	<script type="text/javascript">
		let edit = false;
		let indeks = 0;
		Tambah = () => {
			edit = false;
			// mengosongkan form
			document.getElementById('nama').value = "";
			document.getElementById('jurusan').value = "";
			document.getElementById('alamat').value = "";
		}

		Edit = (index) => {
			edit = true;
			indeks = index;
			let table = document.getElementById('tabel-siswa');

			// mengambil data dari tabel
			let nama = tabel.rows[index].cells[0].innerHTML;
			let jurusan = tabel.rows[index].cells[1].innerHTML;
			let alamat = tabel.rows[index].cells[2].innerHTML;

			// memasukkan data ke form
			document.getElementById('nama').value = nama;
			document.getElementById('jurusan').value = jurusan;
			document.getElementById('alamat').value = alamat;
		}

		Simpan = () => {
			let table = document.getElementById('tabel-siswa');

			// menampung data dari form
			let nama = document.getElementById('nama').value;
			let jurusan = document.getElementById('jurusan').value;
			let alamat = document.getElementById('alamat').value;

			// jika aksinya edit
			if(edit) {
				table.rows[indeks].cells[0].innerHTML = nama;
				table.rows[indeks].cells[1].innerHTML = jurusan;
				table.rows[indeks].cells[2].innerHTML = alamat;
			} else {
				let element = "";
				element += "<tr>";
				element += "<td>" + nama + "</td>";
				element += "<td>" + jurusan + "</td>";
				element += "<td>" + alamat + "</td>";
				element += "<td>";
				element += ' <button type="button" class="btn btn-sm btn-info" data-toggle="modal" data-target="#modal" ';
				element += 'onclick="Edit(this.parentElement.parentElement.rowIndex)">Edit</button>';
				element += '<button type="button" class="btn btn-sm btn-danger" ';
				element += ' onclick="Hapus(this.parentElement.parentElement.rowIndex)"> Hapus </button>';
				element += "</td>"
				element += "</tr>"
				table.innerHTML += element;
			}
		}

		Hapus = (index) => {
			let tabel = document.getElementById('tabel-siswa');
			tabel.deleteRow(index);
		}
	</script>
</head>

<body>
	<div class="container">
		<table class="table" id="tabel-siswa">
			<thead>
				<tr>
					<th>Nama</th>
					<th>Jurusan</th>
					<th>Alamat</th>
					<th>Option</th>
				</tr>
			</thead>

			<tbody>
				<tr>
					<td>Noerdeen</td>
					<td>Rekayasa Perangkat Lunak</td>
					<td>Blitar</td>
					<td>
						<button type="button" class="btn btn-sm btn-info" data-toggle="modal" data-target="#modal" onclick="Edit(this.parentElement.parentElement.rowIndex">Edit</button>

						<button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#modal" onclick="Hapus(this.parentElement.parentElement.rowIndex">Hapus</button>
					</td>
				</tr>

				<tr>
					<td>Cemewew</td>
					<td>Rekayasa Perangkat Lunak</td>
					<td>Nagk Malang</td>
					
					<td>
						<button type="button" class="btn btn-sm btn-info" data-toggle="modal" data-target="#modal" onclick="Edit(this.parentElement.parentElement.rowIndex">Edit</button>

						<button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#modal" onclick="Hapus(this.parentElement.parentElement.rowIndex">Hapus</button>
					</td>

				</tr>

			</tbody>
		</table>

		<button type="button" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#modal" onclick="Tambah(this.parentElement.parentElement.rowIndex">Tambah</button>

	</div>


	<!-- modal --> <!-- modal --> <!-- modal -->

	<div class="modal" id="modal">
		<div class="modal-dialog modal-md">
			<div class="modal-content">

				<div class="modal-header">
					<h4>Form Modal</h4>
					<span class="close" data-dismiss="modal">
						&times;
					</span>
				</div>

				<div class="modal-body">
					<div class="form-group">
						<label>Nama</label>
						<div class="col-sm-12">
							<input type="text" id="nama" class="form-control">
						</div>
					</div>

					<div class="form-group">
						<label>Jurusan</label>
						<div class="col-sm-12">
							<select type="text" id="jurusan" class="form-control">
								<option value="Rekayasa Perangkat Lunak">
									Rekayasa Perangkat  Lunak
								</option>
								<option value="Teknik Komputer dan Jaringan">Teknik Komputer dan Jaringan</option>
							</select> 
						</div>
					</div>

					<div class="form-group">
						<label>Alamat</label>
						<div class="col-sm-12">
							<input type="text" id="alamat" class="form-control">
						</div>
					</div>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-sm btn-success" data-dismiss="modal" onclick="Simpan();">
						Simpan
					</button>
				</div>
			</div>
		</div>
	</div>

</body>

</html>